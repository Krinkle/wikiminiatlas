var p2t=function(){var c={sweep:{},Point:function(){this.y=this.x=null;0==arguments.length?this.y=this.x=0:2==arguments.length&&(this.x=arguments[0],this.y=arguments[1]);this.edge_list=[]}};c.Point.prototype.set_zero=function(){this.y=this.x=0};c.Point.prototype.set=function(a,b){this.x=a;this.y=b};c.Point.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};c.Point.prototype.equals=function(a){return c.equals(this,a)};c.cmp=function(a,b){return a.y==b.y?a.x-b.x:a.y-b.y};c.equals=
function(a,b){return a.x==b.x&&a.y==b.y};c.dot=function(a,b){return a.x*b.x+a.y*b.y};c.cross=function(){var a=!1,b=!1;if(2==arguments.length)return"number"==typeof arguments[0]&&(a=!0),typeof("number"==arguments[1])&&(b=!0),a?b?arguments[0].x*arguments[1].y-arguments[0].y*arguments[1].x:new c.Point(arguments[1]*arguments[0].y,-arguments[1]*arguments[0].x):b?new c.Point(-arguments[0]*arguments[1].y,arguments[0]*arguments[1].x):arguments[0]*arguments[1]};c.Edge=function(){this.q=this.p=null;2==arguments.length&&
(arguments[0].y>arguments[1].y?(this.q=arguments[0],this.p=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.q=arguments[0],this.p=arguments[1]):arguments[0].x!=arguments[1].x&&(this.p=arguments[0],this.q=arguments[1]):(this.p=arguments[0],this.q=arguments[1]));this.q.edge_list.push(this)};c.T3=function(a,b,c){this.points_=[null,null,null];this.neighbors_=[null,null,null];this.interior_=!1;this.constrained_edge=[!1,!1,!1];this.delaunay_edge=[!1,!1,!1];3==arguments.length&&
(this.points_[0]=a,this.points_[1]=b,this.points_[2]=c)};c.T3.prototype.GetPoint=function(a){return this.points_[a]};c.T3.prototype.GetN1=function(a){return this.neighbors_[a]};c.T3.prototype.ContainsP=function(){for(var a=!0,b=0;b<arguments.length;++b)a=a&&(arguments[b].equals(this.points_[0])||arguments[b].equals(this.points_[1])||arguments[b].equals(this.points_[2]));return a};c.T3.prototype.ContainsE=function(){for(var a=!0,b=0;b<arguments.length;++b)a=a&&this.ContainsP(arguments[b].p,
arguments[b].q);return a};c.T3.prototype.IsInterior=function(){0!=arguments.length&&(this.interior_=arguments[0]);return this.interior_};c.T3.prototype.MarkN1=function(){var a;if(3==arguments.length){var b=arguments[0],c=arguments[1];a=arguments[2];if(b.equals(this.points_[2])&&c.equals(this.points_[1])||b.equals(this.points_[1])&&c.equals(this.points_[2]))this.neighbors_[0]=a;else if(b.equals(this.points_[0])&&c.equals(this.points_[2])||b.equals(this.points_[2])&&c.equals(this.points_[0]))this.neighbors_[1]=
a;else if(b.equals(this.points_[0])&&c.equals(this.points_[1])||b.equals(this.points_[1])&&c.equals(this.points_[0]))this.neighbors_[2]=a}else 1==arguments.length&&(a=arguments[0],a.ContainsP(this.points_[1],this.points_[2])?(this.neighbors_[0]=a,a.MarkN1(this.points_[1],this.points_[2],this)):a.ContainsP(this.points_[0],this.points_[2])?(this.neighbors_[1]=a,a.MarkN1(this.points_[0],this.points_[2],this)):a.ContainsP(this.points_[0],this.points_[1])&&(this.neighbors_[2]=a,a.MarkN1(this.points_[0],
this.points_[1],this)))};c.T3.prototype.ClearNeigbors=function(){this.neighbors_[0]=null;this.neighbors_[1]=null;this.neighbors_[2]=null};c.T3.prototype.ClearDelunayEdges=function(){this.delaunay_edge[0]=!1;this.delaunay_edge[1]=!1;this.delaunay_edge[2]=!1};c.T3.prototype.PointCW=function(a){return a.equals(this.points_[0])?this.points_[2]:a.equals(this.points_[1])?this.points_[0]:a.equals(this.points_[2])?this.points_[1]:null};c.T3.prototype.PointCCW=function(a){return a.equals(this.points_[0])?
this.points_[1]:a.equals(this.points_[1])?this.points_[2]:a.equals(this.points_[2])?this.points_[0]:null};c.T3.prototype.N1CW=function(a){return a.equals(this.points_[0])?this.neighbors_[1]:a.equals(this.points_[1])?this.neighbors_[2]:this.neighbors_[0]};c.T3.prototype.N1CCW=function(a){return a.equals(this.points_[0])?this.neighbors_[2]:a.equals(this.points_[1])?this.neighbors_[0]:this.neighbors_[1]};c.T3.prototype.GetConstrainedEdgeCW=function(a){return a.equals(this.points_[0])?
this.constrained_edge[1]:a.equals(this.points_[1])?this.constrained_edge[2]:this.constrained_edge[0]};c.T3.prototype.GetConstrainedEdgeCCW=function(a){return a.equals(this.points_[0])?this.constrained_edge[2]:a.equals(this.points_[1])?this.constrained_edge[0]:this.constrained_edge[1]};c.T3.prototype.SetConstrainedEdgeCW=function(a,b){a.equals(this.points_[0])?this.constrained_edge[1]=b:a.equals(this.points_[1])?this.constrained_edge[2]=b:this.constrained_edge[0]=b};c.T3.prototype.SetConstrainedEdgeCCW=
function(a,b){a.equals(this.points_[0])?this.constrained_edge[2]=b:a.equals(this.points_[1])?this.constrained_edge[0]=b:this.constrained_edge[1]=b};c.T3.prototype.GetDelaunayEdgeCW=function(a){return a.equals(this.points_[0])?this.delaunay_edge[1]:a.equals(this.points_[1])?this.delaunay_edge[2]:this.delaunay_edge[0]};c.T3.prototype.GetDelaunayEdgeCCW=function(a){return a.equals(this.points_[0])?this.delaunay_edge[2]:a.equals(this.points_[1])?this.delaunay_edge[0]:this.delaunay_edge[1]};
c.T3.prototype.SetDelaunayEdgeCW=function(a,b){a.equals(this.points_[0])?this.delaunay_edge[1]=b:a.equals(this.points_[1])?this.delaunay_edge[2]=b:this.delaunay_edge[0]=b};c.T3.prototype.SetDelaunayEdgeCCW=function(a,b){a.equals(this.points_[0])?this.delaunay_edge[2]=b:a.equals(this.points_[1])?this.delaunay_edge[0]=b:this.delaunay_edge[1]=b};c.T3.prototype.N1Across=function(a){return a.equals(this.points_[0])?this.neighbors_[0]:a.equals(this.points_[1])?this.neighbors_[1]:
this.neighbors_[2]};c.T3.prototype.OppositePoint=function(a,b){var c=a.PointCW(b);return this.PointCW(c)};c.T3.prototype.Legalize=function(){if(1==arguments.length)this.Legalize(this.points_[0],arguments[0]);else if(2==arguments.length){var a=arguments[0],b=arguments[1];a.equals(this.points_[0])?(this.points_[1]=this.points_[0],this.points_[0]=this.points_[2],this.points_[2]=b):a.equals(this.points_[1])?(this.points_[2]=this.points_[1],this.points_[1]=this.points_[0],this.points_[0]=b):
a.equals(this.points_[2])&&(this.points_[0]=this.points_[2],this.points_[2]=this.points_[1],this.points_[1]=b)}};c.T3.prototype.Index=function(a){return a.equals(this.points_[0])?0:a.equals(this.points_[1])?1:a.equals(this.points_[2])?2:-1};c.T3.prototype.EdgeIndex=function(a,b){if(a.equals(this.points_[0])){if(b.equals(this.points_[1]))return 2;if(b.equals(this.points_[2]))return 1}else if(a.equals(this.points_[1])){if(b.equals(this.points_[2]))return 0;if(b.equals(this.points_[0]))return 2}else if(a.equals(this.points_[2])){if(b.equals(this.points_[0]))return 1;
if(b.equals(this.points_[1]))return 0}return-1};c.T3.prototype.MarkConstrainedEdge=function(){if(1==arguments.length)"number"==typeof arguments[0]?this.constrained_edge[arguments[0]]=!0:this.MarkConstrainedEdge(arguments[0].p,arguments[0].q);else if(2==arguments.length){var a=arguments[0],b=arguments[1];if(b.equals(this.points_[0])&&a.equals(this.points_[1])||b.equals(this.points_[1])&&a.equals(this.points_[0]))this.constrained_edge[2]=!0;else if(b.equals(this.points_[0])&&a.equals(this.points_[2])||
b.equals(this.points_[2])&&a.equals(this.points_[0]))this.constrained_edge[1]=!0;else if(b.equals(this.points_[1])&&a.equals(this.points_[2])||b.equals(this.points_[2])&&a.equals(this.points_[1]))this.constrained_edge[0]=!0}};c.PI_3div4=3*Math.PI/4;c.PI_2=Math.PI/2;c.EPSILON=1E-12;c.kAlpha=0.3;c.O2={CW:1,CCW:-1,COLLINEAR:0};c.Orient2d=function(a,b,d){a=(a.x-d.x)*(b.y-d.y)-(a.y-d.y)*(b.x-d.x);return a>-c.EPSILON&&a<c.EPSILON?c.O2.COLLINEAR:0<a?c.O2.CCW:c.O2.CW};
c.InScanArea=function(a,b,d,e){var f=e.x;e=e.y;var g=a.x-f;a=a.y-e;return g*(b.y-e)-(b.x-f)*a<=c.EPSILON||(d.x-f)*a-g*(d.y-e)<=c.EPSILON?!1:!0};c.Node=function(){this.prev=this.next=this.triangle=this.point=null;this.value=0;1==arguments.length?(this.point=arguments[0],this.value=this.point.x):2==arguments.length&&(this.point=arguments[0],this.triangle=arguments[1],this.value=this.point.x)};c.AdvancingFront=function(a,b){this.head_=a;this.tail_=b;this.search_node_=a};c.AdvancingFront.prototype.head=
function(){return this.head_};c.AdvancingFront.prototype.set_head=function(a){this.head_=a};c.AdvancingFront.prototype.tail=function(){return this.tail_};c.AdvancingFront.prototype.set_tail=function(a){this.tail_=a};c.AdvancingFront.prototype.search=function(){return this.search_node_};c.AdvancingFront.prototype.set_search=function(a){this.search_node_=a};c.AdvancingFront.prototype.FindSearchNode=function(){return this.search_node_};c.AdvancingFront.prototype.LocateNode=function(a){var b=this.search_node_;
if(a<b.value)for(;null!=(b=b.prev);){if(a>=b.value)return this.search_node_=b}else for(;null!=(b=b.next);)if(a<b.value)return this.search_node_=b.prev;return null};c.AdvancingFront.prototype.LocatePoint=function(a){var b=a.x,c=this.FindSearchNode(b),e=c.point.x;if(b==e)if(c.prev&&a.equals(c.prev.point))c=c.prev;else if(c.next&&a.equals(c.next.point))c=c.next;else{if(!a.equals(c.point))return null}else if(b<e)for(;null!=(c=c.prev)&&!a.equals(c.point););else for(;null!=(c=c.next)&&!a.equals(c.point););
null!=c&&(this.search_node_=c);return c};c.Basin=function(){this.r1=this.bottom_node=this.l1=null;this.width=0;this.left_highest=!1};c.Basin.prototype.Clear=function(){this.r1=this.bottom_node=this.l1=null;this.width=0;this.left_highest=!1};c.EdgeEvent=function(){this.constrained_edge=null;this.right=!1};c.SweepContext=function(a){this.triangles_=[];this.map_=[];this.points_=a;this.edge_list=[];this.af_tail_=this.af_middle_=this.af_head_=this.tail_=this.head_=this.front_=
null;this.basin=new c.Basin;this.edge_event=new c.EdgeEvent;this.InitEdges(this.points_)};c.SweepContext.prototype.AddHole=function(a){this.InitEdges(a);for(var b in a)this.points_.push(a[b])};c.SweepContext.prototype.front=function(){return this.front_};c.SweepContext.prototype.point_count=function(){return this.points_.length};c.SweepContext.prototype.head=function(){return this.head_};c.SweepContext.prototype.set_head=function(a){this.head_=a};c.SweepContext.prototype.tail=function(){return this.tail_};
c.SweepContext.prototype.set_tail=function(a){this.tail_=a};c.SweepContext.prototype.GetT3s=function(){return this.triangles_};c.SweepContext.prototype.GetMap=function(){return this.map_};c.SweepContext.prototype.InitTriangulation=function(){var a=this.points_[0].x,b=this.points_[0].x,d=this.points_[0].y,e=this.points_[0].y,f;for(f in this.points_){var g=this.points_[f];g.x>a&&(a=g.x);g.x<b&&(b=g.x);g.y>d&&(d=g.y);g.y<e&&(e=g.y)}d=c.kAlpha*(d-e);this.head_=new c.Point(a+c.kAlpha*(a-b),e-d);
this.tail_=new c.Point(b-d,e-d);this.points_.sort(c.cmp)};c.SweepContext.prototype.InitEdges=function(a){for(var b=0;b<a.length;++b)this.edge_list.push(new c.Edge(a[b],a[(b+1)%a.length]))};c.SweepContext.prototype.GetPoint=function(a){return this.points_[a]};c.SweepContext.prototype.AddToMap=function(a){this.map_.push(a)};c.SweepContext.prototype.LocateNode=function(a){return this.front_.LocateNode(a.x)};c.SweepContext.prototype.CreateAdvancingFront=function(){var a,b,d;d=new c.T3(this.points_[0],
this.tail_,this.head_);this.map_.push(d);a=new c.Node(d.GetPoint(1),d);b=new c.Node(d.GetPoint(0),d);d=new c.Node(d.GetPoint(2));this.front_=new c.AdvancingFront(a,d);a.next=b;b.next=d;b.prev=a;d.prev=b};c.SweepContext.prototype.RemoveNode=function(){};c.SweepContext.prototype.MapT3ToNodes=function(a){for(var b=0;3>b;++b)if(null==a.GetN1(b)){var c=this.front_.LocatePoint(a.PointCW(a.GetPoint(b)));null!=c&&(c.triangle=a)}};c.SweepContext.prototype.RemoveFromMap=function(a){for(var b in this.map_)if(this.map_[b]==
a){delete this.map_[b];break}};c.SweepContext.prototype.MeshClean=function(a){if(null!=a&&!a.IsInterior()){a.IsInterior(!0);this.triangles_.push(a);for(var b=0;3>b;++b)a.constrained_edge[b]||this.MeshClean(a.GetN1(b))}};c.sweep.Triangulate=function(a){a.InitTriangulation();a.CreateAdvancingFront();c.sweep.SweepPoints(a);c.sweep.FinalizationPolygon(a)};c.sweep.SweepPoints=function(a){for(var b=1;b<a.point_count();++b)for(var d=a.GetPoint(b),e=c.sweep.PointEvent(a,d),f=0;f<d.edge_list.length;++f)c.sweep.EdgeEvent(a,
d.edge_list[f],e)};c.sweep.FinalizationPolygon=function(a){for(var b=a.front().head().next.triangle,c=a.front().head().next.point;!b.GetConstrainedEdgeCW(c);)b=b.N1CCW(c);a.MeshClean(b)};c.sweep.PointEvent=function(a,b){var d=a.LocateNode(b),e=c.sweep.NewFrontT3(a,b,d);b.x<=d.point.x+c.EPSILON&&c.sweep.Fill(a,d);c.sweep.FillAdvancingFront(a,e);return e};c.sweep.EdgeEvent=function(){var a;if(3==arguments.length){a=arguments[0];var b=arguments[1],d=arguments[2];a.edge_event.constrained_edge=
b;a.edge_event.right=b.p.x>b.q.x;c.sweep.IsEdgeSideOfT3(d.triangle,b.p,b.q)||(c.sweep.FillEdgeEvent(a,b,d),c.sweep.EdgeEvent(a,b.p,b.q,d.triangle,b.q))}else if(5==arguments.length){a=arguments[0];var b=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4];if(!c.sweep.IsEdgeSideOfT3(e,b,d)){var g=e.PointCCW(f),g=c.Orient2d(d,g,b);if(g!=c.O2.COLLINEAR){var h=e.PointCW(f),h=c.Orient2d(d,h,b);h!=c.O2.COLLINEAR&&(g==h?(e=g==c.O2.CW?e.N1CCW(f):e.N1CW(f),
c.sweep.EdgeEvent(a,b,d,e,f)):c.sweep.FlipEdgeEvent(a,b,d,e,f))}}}};c.sweep.IsEdgeSideOfT3=function(a,b,c){var e=a.EdgeIndex(b,c);return-1!=e?(a.MarkConstrainedEdge(e),a=a.GetN1(e),null!=a&&a.MarkConstrainedEdge(b,c),!0):!1};c.sweep.NewFrontT3=function(a,b,d){var e=new c.T3(b,d.point,d.next.point);e.MarkN1(d.triangle);a.AddToMap(e);b=new c.Node(b);b.next=d.next;b.prev=d;d.next.prev=b;d.next=b;c.sweep.Legalize(a,e)||a.MapT3ToNodes(e);return b};c.sweep.Fill=function(a,
b){var d=new c.T3(b.prev.point,b.point,b.next.point);d.MarkN1(b.prev.triangle);d.MarkN1(b.triangle);a.AddToMap(d);b.prev.next=b.next;b.next.prev=b.prev;c.sweep.Legalize(a,d)||a.MapT3ToNodes(d)};c.sweep.FillAdvancingFront=function(a,b){for(var d=b.next,e;null!=d.next;){e=c.sweep.HoleAngle(d);if(e>c.PI_2||e<-c.PI_2)break;c.sweep.Fill(a,d);d=d.next}for(d=b.prev;null!=d.prev;){e=c.sweep.HoleAngle(d);if(e>c.PI_2||e<-c.PI_2)break;c.sweep.Fill(a,d);d=d.prev}null!=b.next&&null!=b.next.next&&
(e=c.sweep.BasinAngle(b),e<c.PI_3div4&&c.sweep.FillBasin(a,b))};c.sweep.BasinAngle=function(a){return Math.atan2(a.point.y-a.next.next.point.y,a.point.x-a.next.next.point.x)};c.sweep.HoleAngle=function(a){var b=a.next.point.x-a.point.x,c=a.next.point.y-a.point.y,e=a.prev.point.x-a.point.x;a=a.prev.point.y-a.point.y;return Math.atan2(b*a-c*e,b*e+c*a)};c.sweep.Legalize=function(a,b){for(var d=0;3>d;++d)if(!b.delaunay_edge[d]){var e=b.GetN1(d);if(null!=e){var f=b.GetPoint(d),g=e.OppositePoint(b,
f),h=e.Index(g);if(e.constrained_edge[h]||e.delaunay_edge[h])b.constrained_edge[d]=e.constrained_edge[h];else if(c.sweep.Incircle(f,b.PointCCW(f),b.PointCW(f),g))return b.delaunay_edge[d]=!0,e.delaunay_edge[h]=!0,c.sweep.RotateT3Pair(b,f,e,g),(f=!c.sweep.Legalize(a,b))&&a.MapT3ToNodes(b),(f=!c.sweep.Legalize(a,e))&&a.MapT3ToNodes(e),b.delaunay_edge[d]=!1,e.delaunay_edge[h]=!1,!0}}return!1};c.sweep.Incircle=function(a,b,c,e){var f=a.x-e.x;a=a.y-e.y;var g=b.x-e.x;b=b.y-e.y;var h=f*
b-g*a;if(0>=h)return!1;var j=c.x-e.x;c=c.y-e.y;e=j*a-f*c;return 0>=e?!1:0<(f*f+a*a)*(g*c-j*b)+(g*g+b*b)*e+(j*j+c*c)*h};c.sweep.RotateT3Pair=function(a,b,c,e){var f,g,h,j;f=a.N1CCW(b);g=a.N1CW(b);h=c.N1CCW(e);j=c.N1CW(e);var k,l,m,n;k=a.GetConstrainedEdgeCCW(b);l=a.GetConstrainedEdgeCW(b);m=c.GetConstrainedEdgeCCW(e);n=c.GetConstrainedEdgeCW(e);var p,q,r,s;p=a.GetDelaunayEdgeCCW(b);q=a.GetDelaunayEdgeCW(b);r=c.GetDelaunayEdgeCCW(e);s=c.GetDelaunayEdgeCW(e);a.Legalize(b,
e);c.Legalize(e,b);c.SetDelaunayEdgeCCW(b,p);a.SetDelaunayEdgeCW(b,q);a.SetDelaunayEdgeCCW(e,r);c.SetDelaunayEdgeCW(e,s);c.SetConstrainedEdgeCCW(b,k);a.SetConstrainedEdgeCW(b,l);a.SetConstrainedEdgeCCW(e,m);c.SetConstrainedEdgeCW(e,n);a.ClearNeigbors();c.ClearNeigbors();f&&c.MarkN1(f);g&&a.MarkN1(g);h&&a.MarkN1(h);j&&c.MarkN1(j);a.MarkN1(c)};c.sweep.FillBasin=function(a,b){a.basin.l1=c.Orient2d(b.point,b.next.point,b.next.next.point)==c.O2.CCW?b.next.next:
b.next;for(a.basin.bottom_node=a.basin.l1;null!=a.basin.bottom_node.next&&a.basin.bottom_node.point.y>=a.basin.bottom_node.next.point.y;)a.basin.bottom_node=a.basin.bottom_node.next;if(a.basin.bottom_node!=a.basin.l1){for(a.basin.r1=a.basin.bottom_node;null!=a.basin.r1.next&&a.basin.r1.point.y<a.basin.r1.next.point.y;)a.basin.r1=a.basin.r1.next;a.basin.r1!=a.basin.bottom_node&&(a.basin.width=a.basin.r1.point.x-a.basin.l1.point.x,
a.basin.left_highest=a.basin.l1.point.y>a.basin.r1.point.y,c.sweep.FillBasinReq(a,a.basin.bottom_node))}};c.sweep.FillBasinReq=function(a,b){if(!c.sweep.IsShallow(a,b)){c.sweep.Fill(a,b);var d;if(!(b.prev==a.basin.l1&&b.next==a.basin.r1)){if(b.prev==a.basin.l1){d=c.Orient2d(b.point,b.next.point,b.next.next.point);if(d==c.O2.CW)return;b=b.next}else if(b.next==a.basin.r1){d=c.Orient2d(b.point,b.prev.point,b.prev.prev.point);if(d==c.O2.CCW)return;
b=b.prev}else b=b.prev.point.y<b.next.point.y?b.prev:b.next;c.sweep.FillBasinReq(a,b)}}};c.sweep.IsShallow=function(a,b){return a.basin.width>(a.basin.left_highest?a.basin.l1.point.y-b.point.y:a.basin.r1.point.y-b.point.y)?!0:!1};c.sweep.FillEdgeEvent=function(a,b,d){a.edge_event.right?c.sweep.FillRightAboveEdgeEvent(a,b,d):c.sweep.FillLeftAboveEdgeEvent(a,b,d)};c.sweep.FillRightAboveEdgeEvent=function(a,b,d){for(;d.next.point.x<b.p.x;)c.Orient2d(b.q,d.next.point,b.p)==c.O2.CCW?
c.sweep.FillRightBelowEdgeEvent(a,b,d):d=d.next};c.sweep.FillRightBelowEdgeEvent=function(a,b,d){d.point.x<b.p.x&&(c.Orient2d(d.point,d.next.point,d.next.next.point)==c.O2.CCW?c.sweep.FillRightConcaveEdgeEvent(a,b,d):(c.sweep.FillRightConvexEdgeEvent(a,b,d),c.sweep.FillRightBelowEdgeEvent(a,b,d)))};c.sweep.FillRightConcaveEdgeEvent=function(a,b,d){c.sweep.Fill(a,d.next);d.next.point!=b.p&&(c.Orient2d(b.q,d.next.point,b.p)==c.O2.CCW&&c.Orient2d(d.point,d.next.point,d.next.next.point)==
c.O2.CCW)&&c.sweep.FillRightConcaveEdgeEvent(a,b,d)};c.sweep.FillRightConvexEdgeEvent=function(a,b,d){c.Orient2d(d.next.point,d.next.next.point,d.next.next.next.point)==c.O2.CCW?c.sweep.FillRightConcaveEdgeEvent(a,b,d.next):c.Orient2d(b.q,d.next.next.point,b.p)==c.O2.CCW&&c.sweep.FillRightConvexEdgeEvent(a,b,d.next)};c.sweep.FillLeftAboveEdgeEvent=function(a,b,d){for(;d.prev.point.x>b.p.x;)c.Orient2d(b.q,d.prev.point,b.p)==c.O2.CW?c.sweep.FillLeftBelowEdgeEvent(a,
b,d):d=d.prev};c.sweep.FillLeftBelowEdgeEvent=function(a,b,d){d.point.x>b.p.x&&(c.Orient2d(d.point,d.prev.point,d.prev.prev.point)==c.O2.CW?c.sweep.FillLeftConcaveEdgeEvent(a,b,d):(c.sweep.FillLeftConvexEdgeEvent(a,b,d),c.sweep.FillLeftBelowEdgeEvent(a,b,d)))};c.sweep.FillLeftConvexEdgeEvent=function(a,b,d){c.Orient2d(d.prev.point,d.prev.prev.point,d.prev.prev.prev.point)==c.O2.CW?c.sweep.FillLeftConcaveEdgeEvent(a,b,d.prev):c.Orient2d(b.q,d.prev.prev.point,b.p)==c.O2.CW&&
c.sweep.FillLeftConvexEdgeEvent(a,b,d.prev)};c.sweep.FillLeftConcaveEdgeEvent=function(a,b,d){c.sweep.Fill(a,d.prev);d.prev.point!=b.p&&(c.Orient2d(b.q,d.prev.point,b.p)==c.O2.CW&&c.Orient2d(d.point,d.prev.point,d.prev.prev.point)==c.O2.CW)&&c.sweep.FillLeftConcaveEdgeEvent(a,b,d)};c.sweep.FlipEdgeEvent=function(a,b,d,e,f){var g=e.N1Across(f);if(null!=g){var h=g.OppositePoint(e,f);if(c.InScanArea(f,e.PointCCW(f),e.PointCW(f),h))if(c.sweep.RotateT3Pair(e,f,g,h),a.MapT3ToNodes(e),
a.MapT3ToNodes(g),f==d&&h==b)d==a.edge_event.constrained_edge.q&&b==a.edge_event.constrained_edge.p&&(e.MarkConstrainedEdge(b,d),g.MarkConstrainedEdge(b,d),c.sweep.Legalize(a,e),c.sweep.Legalize(a,g));else{var j=c.Orient2d(d,h,b);e=c.sweep.NextFlipT3(a,j,e,g,f,h);c.sweep.FlipEdgeEvent(a,b,d,e,f)}else h=c.sweep.NextFlipPoint(b,d,g,h),c.sweep.FlipScanEdgeEvent(a,b,d,e,g,h),c.sweep.EdgeEvent(a,b,d,e,f)}};c.sweep.NextFlipT3=function(a,b,d,e,f,g){if(b==c.O2.CCW)return b=e.EdgeIndex(f,
g),e.delaunay_edge[b]=!0,c.sweep.Legalize(a,e),e.ClearDelunayEdges(),d;b=d.EdgeIndex(f,g);d.delaunay_edge[b]=!0;c.sweep.Legalize(a,d);d.ClearDelunayEdges();return e};c.sweep.NextFlipPoint=function(a,b,d,e){a=c.Orient2d(b,e,a);if(a==c.O2.CW)return d.PointCCW(e);if(a==c.O2.CCW)return d.PointCW(e)};c.sweep.FlipScanEdgeEvent=function(a,b,d,e,f,g){var h=f.N1Across(g);null!=h&&(f=h.OppositePoint(f,g),c.InScanArea(d,e.PointCCW(d),e.PointCW(d),f)?c.sweep.FlipEdgeEvent(a,d,f,h,f):(f=
c.sweep.NextFlipPoint(b,d,h,f),c.sweep.FlipScanEdgeEvent(a,b,d,e,h,f)))};return{Point:c.Point,SweepContext:c.SweepContext,sweep:{Triangulate:c.sweep.Triangulate}}}();
