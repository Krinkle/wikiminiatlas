var wmajt=(function(){var F=128,L=128,K="en",e=12,f=14,n={},u={},c={},E={},v=false,q=true,P,C,N,A,G,M,H=1,p,l,Q,b,R,k=null,d=null,I={Polygon:[["natural",{land_polygons:1},[{fillStyle:"rgb(250,250,208)"}]],["railway",{platform:1},[{fillStyle:"rgb(220,220,220)"}]],["landuse",{industrial:1,retail:1,commercial:1,residential:1},[{fillStyle:"rgb(208,208,208)"}]],["landuse",{reservoir:1},[{fillStyle:"rgb(200,200,224)"}]],["landuse",{military:1,railway:1},[{fillStyle:"rgb(224,200,200)"}]],["landuse",{cemetery:1,recreation_ground:1},[{fillStyle:"rgb(190,214,190)"}]],["landuse",{grass:1},[{globalAlpha:0.3,fillStyle:"rgb(0,160,0)"},{globalAlpha:1}]],["leisure",{park:1,orchard:1,meadow:1,village_green:1,golf_course:1,track:1,forrest:1,recreation_ground:1,dog_park:1,garden:1,pitch:1,stadium:1},[{fillStyle:"rgb(200,224,200)"}]],["waterway",{riverbank:1,dock:1},[{fillStyle:"rgb(158,199,243)"}]],["natural",{beach:1,sand:1},[{fillStyle:"rgb(250,242,175)"}]],["natural",{wetland:1,mud:1},[{fillStyle:"rgb(200,218,224)"}]],["natural",{grassland:1,fell:1},[{fillStyle:"rgb(200,224,200)"}]],["natural",{scrub:1},[{fillStyle:"rgb(150,214,150)"}]],["natural",{wood:1},[{fillStyle:"rgb(100,204,100)"}]],["natural",{water:1,bay:1},[{fillStyle:"rgb(158,199,243)"},{lineWidth:1,strokeStyle:"rgb(158,199,243)"}]],["natural",{glacier:1},[{fillStyle:"rgb(230,245,255)"},{lineWidth:1,strokeStyle:"rgb(255,255,255)"}]],["amenity",{university:1},[{lineWidth:0.5,strokeStyle:"rgb(240,225,183)"}]],["amenity",{parking:1},[{fillStyle:"rgb(240,235,193)"}]],["highway",{pedestrian:1},[{fillStyle:"rgb(255,255,255)"},{lineWidth:2,strokeStyle:"rgb(168,148,148)"}]],["tourism",true,[{dash:[3,3],lineWidth:2,strokeStyle:"rgb(255,255,0)"}]],["aeroway",{terminal:1},[{fillStyle:"rgb(190,210,190)"},{lineWidth:1,strokeStyle:"rgb(127,137,127)"}]],["historic",{memorial:1,monument:1,fort:1,castle:1},[{fillStyle:"rgb(255,190,190)"},{lineWidth:1,strokeStyle:"rgb(167,120,120)"}]],["historic",{ship:1,wreck:1},[{fillStyle:"rgb(255,190,235)"}]],["railway",{station:1},[{fillStyle:"rgb(210,195,195)"},{lineWidth:1,strokeStyle:"rgb(127,127,127)"}]],["natural",{water:1,bay:1},[{fillStyle:"rgb(158,199,243)"},{lineWidth:1,strokeStyle:"rgb(158,199,243)"}]],["building",true,[{fillStyle:"rgb(200,200,200)"},{lineWidth:1,strokeStyle:"rgb(127,127,127)"}]],["building:part",true,[{fillStyle:"rgb(200,200,200)"},{lineWidth:1,strokeStyle:"rgb(127,127,127)"}]],["aeroway",{runway:1},[{fillStyle:"rgb(100,130,100)"},{lineWidth:1,strokeStyle:"rgb(150,180,150)"}]]],LineString:[["natural",{coastlines:1},[{lineWidth:1,strokeStyle:"rgb(125,125,104)"}]],["waterway",{canal:1},[{lineCap:"butt",lineWidth:3,strokeStyle:"rgb(158,199,243)"}]],["waterway",{river:1},[{lineWidth:1.5,strokeStyle:"rgb(126,159,194)"}]],["waterway",{stream:1},[{dash:[2,2],lineWidth:1.5,strokeStyle:"rgb(126,159,194)"}]],["route",{ferry:1},[{dash:[4,4],lineWidth:2,strokeStyle:"rgb(126,159,194)"}]],["highway",{pedestrian:1},[{lineWidth:5,strokeStyle:"rgb(255,255,255)"}]],["highway",{footway:1,pedestrian:1,path:1},[{lineWidth:2,strokeStyle:"rgb(198,178,178)"}]],["highway",{steps:1},[{dash:[1.5,1.5],lineWidth:3,strokeStyle:"rgb(168,148,148)"}]],["highway",{service:1,bus_guideway:1},[{lineWidth:4,strokeStyle:"rgb(168,168,168)"},{lineWidth:2.5,strokeStyle:"rgb(208,208,208)"}]],["highway",{track:1},[{lineWidth:3.5,strokeStyle:"rgb(168,168,168)"},{lineWidth:2.5,strokeStyle:"rgb(250,250,208)"}]],["highway",{residential:1,unclassified:1},[{lineWidth:4,strokeStyle:"rgb(200,200,200)"},{lineWidth:2.5,strokeStyle:"rgb(255,255,255)"}]],["highway",{tertiary:1},[{lineWidth:5,strokeStyle:"rgb(200,200,200)"},{lineWidth:3.5,strokeStyle:"rgb(255,255,235)"}]],["railway",{subway:1},[{globalAlpha:0.2,lineWidth:3,strokeStyle:"rgb(100,100,100)"},{globalAlpha:1}]],["railway",{rail:1,preserved:1,monorail:1,narrow_gauge:1},[{lineWidth:3,strokeStyle:"rgb(100,100,100)"}]],["highway",{secondary:1,secondary_link:1,primary:1,primary_link:1},[{lineCap:"round",lineWidth:6,strokeStyle:"rgb(171,158,137)"}]],["highway",{motorway:1,motorway_link:1,trunk:1,trunk_link:1},[{lineWidth:7,strokeStyle:"rgb(188,149,28)"}]],["aeroway",{runway:1},[{lineWidth:10,strokeStyle:"rgb(100,130,100)"}]],["aeroway",{taxiway:1},[{lineWidth:4.5,strokeStyle:"rgb(100,130,100)"}]],["railway",{subway:1},[{lineCap:"butt",globalAlpha:0.3,dash:[3,3],lineWidth:1.5,strokeStyle:"rgb(255,255,255)"},{globalAlpha:1}]],["railway",{rail:1,narrow_gauge:1},[{dash:[3,3],lineWidth:1.5,strokeStyle:"rgb(255,255,255)"}]],["railway",{preserved:1},[{dash:[3,3],lineWidth:1.5,strokeStyle:"rgb(200,200,200)"}]],["railway",{monorail:1},[{dash:[1,2,4,2],lineWidth:1.5,strokeStyle:"rgb(200,200,200)"}]],["highway",{bus_guideway:1},[{dash:[3,3],lineWidth:2,strokeStyle:"rgb(150,150,255)"}]],["highway",{secondary:1,secondary_link:1},[{lineCap:"round",lineWidth:4.5,strokeStyle:"rgb(255,250,115)"}]],["highway",{primary:1,primary_link:1},[{lineWidth:4,strokeStyle:"rgb(255,230,95)"}]],["highway",{motorway:1,motorway_link:1,trunk:1,trunk_link:1},[{lineWidth:5,strokeStyle:"rgb(242,191,36)"}]],["aeroway",{runway:1},[{lineWidth:8,strokeStyle:"rgb(150,180,150)"}]],["aeroway",{taxiway:1},[{lineWidth:2.5,strokeStyle:"rgb(150,180,150)"}]],["railway",{tram:1},[{globalAlpha:0.4,dash:[3,3],lineWidth:1.5,strokeStyle:"rgb(0,0,0)"},{globalAlpha:1}]],["access",{permissive:1},[{dash:[1,2],lineWidth:1,strokeStyle:"rgb(100,200,100)"}]],["access",{"private":1,residents:1},[{dash:[1,2],lineWidth:1,strokeStyle:"rgb(200,100,100)"}]],["building:part",true,[{lineWidth:1,strokeStyle:"rgb(127,127,255)"}]]]};function x(S,h){var w=S.concat(h),U=[],T={};for(i in w){if(w.hasOwnProperty(i)){if(!(w[i] in T)){T[w[i]]=true;U.push(w[i])}}}return U}function J(h,S,w){return h+"_"+S+"_"+w}function y(U){var Z,W={0:1},Y,V,T;if(U===null){return}Y=U.data;if(U.v&&U.v>=2){Z=U.idx}else{Z={};for(V=0;V<Y.length;++V){for(T in Y[V].tags){if(T in Z){Z[T].push(V)}else{Z[T]=[V]}}}}for(V=0;V<Y.length;++V){if("layer" in Y[V].tags){W[Y[V].tags.layer]=1}}n[J(U.x,U.y,U.z)]={data:U.data,building:{},f:U.f||{},idx:Z,lay:W};var Y=U.data,w,h=U.x,X=U.y,S;if(U.z>=f){for(w=U.z;w>=e;--w){S=n[J(h,X,w)];if(w<f&&S&&S.data){for(V=0;V<Y.length;++V){if("osm_id" in Y[V].tags&&("building" in Y[V].tags||"building:part" in Y[V].tags)&&!(Y[V].tags.osm_id in S.building)){for(T in Y[V].tags){if(T in S.idx){S.idx[T].push(S.data.length)}else{S.idx[T]=[S.data.length]}}S.data.push(Y[V]);S.building[Y[V].tags.osm_id]=1}}}h=Math.floor(h/2);X=Math.floor(X/2)}}else{}z(this.csx,this.csy,this.csz,this)}function m(U,X){if(d){if(U.length>0){var aa=(U[0][0]-P)*128/G,Y=128-(U[0][1]-C)*128/M,ae,ad,W=0,V=d.length,ac=0,ab,Z,h,T,S,w;for(S=1;S<U.length;++S){X.moveTo(aa,Y);T=-ac;ae=(U[S][0]-P)*128/G;ad=128-(U[S][1]-C)*128/M;ab=ae-aa;Z=ad-Y;h=Math.sqrt(ab*ab+Z*Z);ab/=h;Z/=h;w=false;while(true){T+=d[W]*H;if(T>h){w=true;ac=T-h;T=h}X[W%2?"moveTo":"lineTo"](T*ab+aa,T*Z+Y);if(w){break}W=(W+1)%V}aa=ae;Y=ad}}}else{if(U.length>0){X.moveTo((U[0][0]-P)*128/G,128-(U[0][1]-C)*128/M);for(S=1;S<U.length;++S){X.lineTo((U[S][0]-P)*128/G,128-(U[S][1]-C)*128/M)}}}}function D(U,V){var X=null,ab={},h=V.div.offset(),Z=U.pageX-h.left,Y=U.pageY-h.top,W=V.csca.data||[],w,S,aa,ad="";function T(ai,aj,ae){var ag,af,ah;for(j=1;j<ai.length;++j){ag=(ai[j][0]-P)*128/G-Z;af=128-(ai[j][1]-C)*128/M-Y;ah=ag*ag+af*af;if((X===null||ah<X)&&(("name:"+K) in ae.tags||"name" in ae.tags||"addr:street" in ae.tags)){X=ah;ab=ae}}}P=V.csx*60/(1<<V.csz);C=90-(((V.csy+1)*60)/(1<<V.csz));N=(V.csx+1)*60/(1<<V.csz);A=90-((V.csy*60)/(1<<V.csz));G=N-P;M=A-C;if(P>180){P-=360}for(S=0;S<W.length;++S){w=W[S];a(w,"Polygon",null,T);if(w.geo.type=="GeometryCollection"){a(w,"Line",null,T)}}aa=ab.tags||{};if(("name" in aa)||(("name:"+K) in aa)){ad=aa[("name:"+K)]||aa.name;if("loc_name" in aa){ad+=' "'+aa.loc_name+'"'}if("artist_name" in aa){ad+=" ("+aa.artist_name+")"}return ad}if("addr:street" in aa){ad=aa["addr:street"];if("addr:housenumber" in aa){ad=aa["addr:housenumber"]+" "+ad}return ad}var ac=["landuse","historic","highway","building"];for(S=0;S<ac.length;++S){if(ac[S] in aa){return ac[S]+" "+aa[ac[S]]}}return null}function a(h,T,W,V){var S,w,U;switch(h.geo.type){case"Polygon":V(h.geo.coordinates[0],W,h);break;case"LineString":V(h.geo.coordinates,W,h);break;case"MultiLineString":for(S=0;S<h.geo.coordinates.length;++S){V(h.geo.coordinates[S],W,h)}break;case"MultiPolygon":for(S=0;S<h.geo.coordinates.length;++S){V(h.geo.coordinates[S][0],W,h)}break;case"GeometryCollection":U=h.geo.geometries;for(w=0;w<U.length;++w){if(T==="Polygon"){switch(U[w].type){case"Polygon":V(U[w].coordinates[0],W,h);break;case"MultiPolygon":for(S=0;S<U[w].coordinates.length;++S){V(U[w].coordinates[S][0],W,h)}break}}else{switch(U[w].type){case"LineString":V(U[w].coordinates,W,h);break;case"MultiLineString":for(S=0;S<U[w].coordinates.length;++S){V(U[w].coordinates[S],W,h)}break}}}break}}function z(U,T,w,ak,W){var ah=ak.ctx,ac=false,ad,aa,af,ae,X;P=U*60/(1<<w);C=90-(((T+1)*60)/(1<<w));N=(U+1)*60/(1<<w);A=90-((T*60)/(1<<w));G=N-P;M=A-C;if(P>180){P-=360}H=Math.pow(1.25,w-13);function S(ao){var aq,ap,an,ar,av,al,at=ao.data,am,au;ah.lineWidth=1;ah.fillStyle="rgb(158,199,243)";ah.fillRect(0,0,128,128);for(av in I){for(al=0;al<I[av].length;++al){ah.beginPath();if(!(I[av][al][0] in ao.idx)){continue}d=I[av][al][2][0].dash||null;au=ao.idx[I[av][al][0]];for(aq=0;aq<au.length;++aq){am=at[au[aq]];if((av!==am.geo.type&&("Multi"+av)!==am.geo.type&&am.geo.type!=="GeometryCollection")||!(I[av][al][1]===true||am.tags[I[av][al][0]] in I[av][al][1])){continue}a(am,av,ah,m)}ar=I[av][al][2];for(aq=0;aq<ar.length;++aq){for(ap in ar[aq]){if(ap==="lineWidth"){ah.lineWidth=ar[aq].lineWidth*H}else{if(ap!=="dash"){ah[ap]=ar[aq][ap]}}}if("strokeStyle" in ar[aq]){ah.stroke()}if("fillStyle" in ar[aq]){ah.fill()}}}}}function aj(am){var al;if(am===undefined){return null}al=/^(\d+(\.\d*)?)(\s*m)?$/.exec(am);if(al!==null){return parseFloat(al[1])}al=/^((\d+(\.\d*)?)')?((\d+(\.\d*)?)")?$/.exec(am);if(al!==null){return parseFloat(al[2]||"0")*0.3048+parseFloat(al[5]||"0")*0.0254}return 0}ak.csx=U;ak.csy=T;ak.csz=w;var ai,h=U,Z=T,ab,ag,V,Y;for(ai=w;ai>=e;--ai){ab=n[J(h,Z,ai)];if(ab&&ab.data&&!W){if(ak.csca){ag=ak.csca.data;if(v&&"start_date" in ak.csca.idx){Y=ak.csca.idx.start_date;for(i=0;i<Y.length;++i){V=ag[Y[i]].tags.start_date;if(V in u){u[V]--;if(u[V]==0){delete u[V]}}}}if(q&&w>f){Y=x(ak.csca.idx["building:levels"]||[],ak.csca.idx.height||[]);for(i=0;i<Y.length;++i){if("osm_id" in ag[Y[i]].tags){V=ag[Y[i]].tags.osm_id;if(V in c){c[V]--;if(c[V]==0){delete c[V]}}}}}}S(ab);ak.csca=ab;ag=ab.data;if(v&&"start_date" in ab.idx){Y=ab.idx.start_date;for(i=0;i<Y.length;++i){V=ag[Y[i]].tags.start_date;u[V]=(u[V]||0)+1}}if(q&&w>f){Y=x(ab.idx["building:levels"]||[],ab.idx.height||[]);for(i=0;i<Y.length;++i){if("osm_id" in ag[Y[i]].tags){V=ag[Y[i]].tags.osm_id;c[V]=(c[V]||0)+1;if(!(V in E)){E[V]=ag[Y[i]]}}}}if(k!==null){Y=x(ab.idx["building:levels"]||[],ab.idx.height||[]);for(i=0;i<Y.length;++i){if("osm_id" in ag[Y[i]].tags){V=ag[Y[i]].tags.osm_id;if(!(V in c)){c[V]=true;V=ag[Y[i]];ad=aj(V.tags.height)||(V.tags["building:levels"]*3);aa=aj(V.tags.min_height)||(V.tags["building:min_level"]*3)||0;if(V.geo.type==="Polygon"){af=V.geo.coordinates}else{if(V.geo.type==="LineString"){af=[V.geo.coordinates]}else{continue}}ac=true;if(V.tags["building:shape"]==="pyramid"){t(af,aa,ad);continue}if(("roof:shape" in V.tags||"building:roof:shape" in V.tags)&&("roof:height" in V.tags||"building:roof:height" in V.tags)){ae=aj(V.tags["roof:height"]||V.tags["building:roof:height"]);X=V.tags["roof:shape"]||V.tags["building:roof:shape"];if(X==="pyramidal"){if(ae<ad){g(af,aa,ad-ae,true)}t(af,ad-ae,ad);continue}if(af[0].length==5){if(X==="gabled"||X==="hilted"){if(ae<ad){g(af,aa,ad-ae,true)}O(af,ad-ae,ad);continue}}}g(af,aa,ad)}}}}ak.can.show();if(ac){B()}if(w<f||ai>=f){return}}h=Math.floor(h/2);Z=Math.floor(Z/2)}ak.debug.html("/tiles/jsontile.php?x="+U+"&y="+T+"&z="+w);$.ajax({url:"/tiles/jsontile.php?x="+U+"&y="+T+"&z="+w+(W===true?"&action=purge":""),dataType:"json",success:y,context:ak})}function o(h,T,S){glArrList=[];l=[];Q=h;k=T;p=S;var U,w;b=0;R=0;U=new Float32Array(Q*9);w=new Float32Array(Q*9);glArrList.push({v:U,n:w});q=false}function B(){var S,w,U,h,T;if(glArrList.length>l.length||b>R){T=l.length-1;T=T<0?0:T;for(S=T;S<glArrList.length;++S){if(S>=l.length){U=k.createBuffer();h=k.createBuffer();l.push({v:U,n:h})}else{U=l[S].v;h=l[S].n}k.bindBuffer(k.ARRAY_BUFFER,U);k.bufferData(k.ARRAY_BUFFER,glArrList[S].v,k.STATIC_DRAW);k.bindBuffer(k.ARRAY_BUFFER,h);k.bufferData(k.ARRAY_BUFFER,glArrList[S].n,k.STATIC_DRAW)}R=b}w=l.length-1;for(S=0;S<=w;++S){k.bindBuffer(k.ARRAY_BUFFER,l[S].n);k.vertexAttribPointer(p.normalPosAttrib,3,k.FLOAT,false,0,0);k.bindBuffer(k.ARRAY_BUFFER,l[S].v);k.vertexAttribPointer(p.vertexPosAttrib,3,k.FLOAT,false,0,0);k.drawArrays(k.TRIANGLES,0,((S==w)?R:Q)*3)}}function s(S,W){var h=S.length/9,V=Q,U,T,w,W;U=glArrList.length-1;if(b+h<=V){glArrList[U].v.set(S,b*9);glArrList[U].n.set(W,b*9);b+=h}else{for(T=0;T<h;++T){for(w=0;w<9;++w){glArrList[U].v[b*9+w]=S[T*9+w]}b++;if(b==V){b=0;glArrList.push({v:new Float32Array(Q*9),n:new Float32Array(Q*9)});U++}}}if(b==V){b=0;glArrList.push({v:new Float32Array(Q*9),n:new Float32Array(Q*9)})}}function O(ah,ak,ad,w){var aj,ac,ab,aa,Z,W=[],V=[],U=[],T,Y,S,X,ae,ai,ag,af;aj=ah[0];for(ac=0;ac<4;++ac){T=aj[ac][0]-aj[ac+1][0];Y=aj[ac][1]-aj[ac+1][1];W[ac]=Math.sqrt(T*T+Y*Y)}ab=(W[0]+W[2]>W[1]+W[3])?0:1;V[0]=0.5*(aj[ab][0]+aj[ab+3][0]);U[0]=0.5*(aj[ab][1]+aj[ab+3][1]);V[1]=0.5*(aj[ab+1][0]+aj[ab+2][0]);U[1]=0.5*(aj[ab+1][1]+aj[ab+2][1]);ae=ad-ak;for(aa=0;aa<2;++aa){ac=aa*2+ab;T=aj[ac][0]-aj[ac+1][0];Y=aj[ac][1]-aj[ac+1][1];S=V[aa]-aj[ac][0];X=U[aa]-aj[ac][1];ai=-Y*ae;ag=T*ae;af=Y*S-T*X;r=Math.sqrt(ai*ai+ag*ag+af*af);ai/=r;ag/=r;af/=r;s([aj[ac][0],aj[ac][1],ak,aj[ac+1][0],aj[ac+1][1],ak,V[aa],U[aa],ad],[ai,ag,af,ai,ag,af,ai,ag,af]);s([V[aa],U[aa],ad,V[(aa+1)%2],U[(aa+1)%2],ad,aj[ac+1][0],aj[ac+1][1],ak],[ai,ag,af,ai,ag,af,ai,ag,af])}}function t(ad,af,aa){var ae,X,V,T,U=0,S=0,ah,ac,ag,Z,w,ab,Y,W;ae=ad[0];T=ae.length-1;area=0;if(T<3){return}for(X=0;X<T;++X){area+=(ae[X][0]*ae[X+1][1])-(ae[X+1][0]*ae[X][1]);U+=ae[X][0];S+=ae[X][1]}if(area>0){ae.reverse()}U/=T;S/=T;w=aa-af;for(X=0;X<T;++X){ah=ae[X][0]-ae[X+1][0];ac=ae[X][1]-ae[X+1][1];ag=U-ae[X][0];Z=S-ae[X][1];ab=-ac*w;Y=ah*w;W=ac*ag-ah*Z;r=Math.sqrt(ab*ab+Y*Y+W*W);ab/=r;Y/=r;W/=r;s([ae[X][0],ae[X][1],af,ae[X+1][0],ae[X+1][1],af,U,S,aa],[ab,Y,W,ab,Y,W,ab,Y,W])}}function g(af,ah,ad,aj){var T,S,ag,ac,ab,aa,W,ae,Y,X;aj=~~aj;for(ab=0;ab<af.length;++ab){ag=af[ab];aa=ag.length-1;ae=0;if(aa<3){return}for(ac=0;ac<aa;++ac){ae+=(ag[ac][0]*ag[ac+1][1])-(ag[ac+1][0]*ag[ac][1])}ae*=(ab==0)?1:-1;if(ae>0){ag.reverse()}}for(ab=0;ab<af.length;++ab){ag=af[ab];aa=ag.length-1;for(ac=0;ac<aa;++ac){Y=ag[ac][0]-ag[ac+1][0];X=ag[ac][1]-ag[ac+1][1];r=Math.sqrt(Y*Y+X*X);Y/=r;X/=r;s([ag[ac][0],ag[ac][1],ah,ag[ac+1][0],ag[ac+1][1],ah,ag[ac][0],ag[ac][1],ad],[-X,Y,0,-X,Y,0,-X,Y,0]);s([ag[ac][0],ag[ac][1],ad,ag[ac+1][0],ag[ac+1][1],ad,ag[ac+1][0],ag[ac+1][1],ah],[-X,Y,0,-X,Y,0,-X,Y,0])}}if(aj){return}if(af.length===1&&af[0].length<=5){ag=af[0];if(ag.length==4){s([ag[0][0],ag[0][1],ad,ag[1][0],ag[1][1],ad,ag[2][0],ag[2][1],ad],[0,0,1,0,0,1,0,0,1])}else{s([ag[0][0],ag[0][1],ad,ag[1][0],ag[1][1],ad,ag[2][0],ag[2][1],ad,ag[0][0],ag[0][1],ad,ag[2][0],ag[2][1],ad,ag[3][0],ag[3][1],ad],[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1])}return}var w=[],ai=[];ag=af[0];aa=ag.length-1;for(ac=0;ac<aa;++ac){w.push(new p2t.Point(ag[ac][0],ag[ac][1]))}var V=new p2t.SweepContext(w);for(ab=1;ab<af.length;++ab){ag=af[ab];aa=ag.length-1;var Z=[];for(ac=0;ac<aa;++ac){Z.push(new p2t.Point(ag[ac][0],ag[ac][1]))}V.AddHole(Z)}p2t.sweep.Triangulate(V);T=V.GetTriangles();for(ac=0;ac<T.length;++ac){var U=[T[ac].GetPoint(0),T[ac].GetPoint(1),T[ac].GetPoint(2)];s([U[0].x,U[0].y,ad,U[1].x,U[1].y,ad,U[2].x,U[2].y,ad],[0,0,1,0,0,1,0,0,1])}}return{update:z,detectPointer:D,ref_z:function(){return c},zbuild:function(){return E},registerWebGLBuildingData:o,renderWebGLBuildingData:B,setUILang:function(h){K=h}}})();